@startuml
title StatSync - Entity Relationship Diagram

skinparam shadowing false
hide circle

entity "User" as User {
  * id : int <<PK>>
  --
  email : string
  password_hash : string
}

entity "Profile" as Profile {
  * id : int <<PK>>
  --
  role : string
  team_id : int <<FK>>
  player_id : int <<FK>>
}

entity "Team" as Team {
  * id : int <<PK>>
  --
  team_name : string
  team_code : string <<UQ>>
}

entity "Player" as Player {
  * id : int <<PK>>
  --
  team_id : int <<FK>>
  name : string
}

entity "Match" as Match {
  * id : int <<PK>>
  --
  team_id : int <<FK>>
  opponent : string
  kickoff_at : datetime
  xg : float
}

entity "PlayerEventStat" as PES {
  * id : int <<PK>>
  --
  match_id : int <<FK>>
  player_id : int <<FK>>
  event : string
  count : int
}

entity "PlayerEventInstance" as PEI {
  * id : int <<PK>>
  --
  match_id : int <<FK>>
  player_id : int <<FK>>
  event : string
  second : int
  zone : string
}

entity "ChatMessage" as Chat {
  * id : int <<PK>>
  --
  team_id : int <<FK>>
  sender_user_id : int <<FK>>
  message : text
}

User ||--|| Profile
Team ||--o{ Player
Team ||--o{ Match
Match ||--o{ PES
Match ||--o{ PEI
Team ||--o{ Chat
Profile }o--|| Player

@enduml
